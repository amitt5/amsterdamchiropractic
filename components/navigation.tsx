'use client';

import { useState } from 'react';
import Link from 'next/link';
import { useLanguage } from '@/contexts/language-context';

export default function Navigation() {
  const { language, setLanguage } = useLanguage();
  const [menuOpen, setMenuOpen] = useState(false);

  const t = {
    en: {
      book: 'Book Appointment',
      thisPage: 'This Page',
      conditionsLabel: 'Conditions',
      moreLabel: 'More',
      mainNav: [
        { label: 'Services', href: '/#services' },
        { label: 'Approach', href: '/#approach' },
        { label: 'Pricing', href: '/#pricing' },
        { label: 'About', href: '/#about' },
        { label: 'Reviews', href: '/#testimonials' },
        { label: 'FAQ', href: '/#faq' },
        { label: 'Book', href: '/#booking' },
      ],
      klachten: [
        { label: 'All Conditions', href: '/klachten' },
        { label: 'Lower Back Pain', href: '/klachten/lage-rugpijn' },
        { label: 'Neck Pain', href: '/klachten/nek' },
        { label: 'Herniated Disc', href: '/klachten/hernia' },
        { label: 'Whiplash', href: '/klachten/whiplash' },
        { label: 'Headache & Migraine', href: '/klachten/hoofdpijn-en-migraine' },
        { label: 'Pregnancy', href: '/klachten/zwangerschap' },
        { label: 'Sports Injuries', href: '/klachten/sportblessures' },
        { label: "Baby's", href: '/klachten/baby-s' },
        { label: 'Children', href: '/klachten/kinderen' },
        { label: 'Arthrosis / Wear', href: '/klachten/artrose-slijtage' },
      ],
      moreLinks: [
        { label: 'New Patient Center', href: '/new-patient-center' },
        { label: 'Your First Visit', href: '/new-patient-center/your-first-visit' },
        { label: 'What to Expect', href: '/new-patient-center/what-to-expect' },
        { label: 'Payment Options', href: '/new-patient-center/payment-options' },
        { label: 'Meet Your Doctor', href: '/about/meet-your-doctor' },
        { label: 'Health Resources', href: '/health-resources' },
        { label: 'Patient Forms', href: '/patient-forms' },
        { label: 'Office Tour', href: '/office-tour' },
      ],
    },
    nl: {
      book: 'Maak Afspraak',
      thisPage: 'Deze Pagina',
      conditionsLabel: 'Klachten',
      moreLabel: 'Meer',
      mainNav: [
        { label: 'Diensten', href: '/#services' },
        { label: 'Aanpak', href: '/#approach' },
        { label: 'Tarieven', href: '/#pricing' },
        { label: 'Over Ons', href: '/#about' },
        { label: 'Reviews', href: '/#testimonials' },
        { label: 'FAQ', href: '/#faq' },
        { label: 'Boek', href: '/#booking' },
      ],
      klachten: [
        { label: 'Alle klachten', href: '/klachten' },
        { label: 'Lage Rugpijn', href: '/klachten/lage-rugpijn' },
        { label: 'Nek', href: '/klachten/nek' },
        { label: 'Hernia', href: '/klachten/hernia' },
        { label: 'Whiplash', href: '/klachten/whiplash' },
        { label: 'Hoofdpijn & Migraine', href: '/klachten/hoofdpijn-en-migraine' },
        { label: 'Zwangerschap', href: '/klachten/zwangerschap' },
        { label: 'Sportblessures', href: '/klachten/sportblessures' },
        { label: "Baby's", href: '/klachten/baby-s' },
        { label: 'Kinderen', href: '/klachten/kinderen' },
        { label: 'Artrose / Slijtage', href: '/klachten/artrose-slijtage' },
      ],
      moreLinks: [
        { label: 'Nieuwe Patiënten', href: '/new-patient-center' },
        { label: 'Uw Eerste Bezoek', href: '/new-patient-center/your-first-visit' },
        { label: 'Wat te Verwachten', href: '/new-patient-center/what-to-expect' },
        { label: 'Betalingsopties', href: '/new-patient-center/payment-options' },
        { label: 'Ontmoet Dr. Jahani', href: '/about/meet-your-doctor' },
        { label: 'Gezondheidsinfo', href: '/health-resources' },
        { label: 'Patiëntformulieren', href: '/patient-forms' },
        { label: 'Praktijkrondleiding', href: '/office-tour' },
      ],
    },
  };

  const c = t[language];

  return (
    <nav className="sticky top-0 z-50 bg-white shadow-sm">
      <div className="max-w-6xl mx-auto px-6 flex items-center justify-between py-4">
        {/* Logo */}
        <Link href="/" className="flex items-center gap-2.5 hover:opacity-80 transition-opacity flex-shrink-0">
          <div className="w-9 h-9 rounded-full bg-[#45321A] flex items-center justify-center">
            <svg viewBox="0 0 24 24" fill="none" className="w-5 h-5">
              <path d="M12 2C9 2 7 5 7 8c0 2 1 3.5 2.5 4.5L9 20h6l-.5-7.5C16 11.5 17 10 17 8c0-3-2-6-5-6z" fill="white" />
            </svg>
          </div>
          <div>
            <div className="font-extrabold text-base text-[#191919] leading-tight">Health4Life</div>
            <div className="text-[10px] text-[#45321A] font-semibold uppercase tracking-widest leading-none">Chiropractic</div>
          </div>
        </Link>

        {/* Desktop nav links */}
        <div className="hidden md:flex items-center gap-8 text-sm font-medium text-[#403F3F]">
          {c.mainNav.map(({ label, href }) => (
            <Link key={href} href={href} className="hover:text-[#45321A] transition-colors">
              {label}
            </Link>
          ))}
        </div>

        {/* Right side */}
        <div className="flex items-center gap-3">
          {/* EN/NL toggle — always visible */}
          <div className="flex items-center bg-[#F6F6F6] rounded-full p-1">
            <button
              onClick={() => setLanguage('en')}
              className={`px-3 py-1.5 rounded-full text-xs font-semibold transition-colors ${language === 'en' ? 'bg-[#45321A] text-white' : 'text-[#403F3F] hover:text-[#45321A]'}`}
            >
              EN
            </button>
            <button
              onClick={() => setLanguage('nl')}
              className={`px-3 py-1.5 rounded-full text-xs font-semibold transition-colors ${language === 'nl' ? 'bg-[#45321A] text-white' : 'text-[#403F3F] hover:text-[#45321A]'}`}
            >
              NL
            </button>
          </div>

          <Link
            href="/#booking"
            className="hidden md:block bg-[#45321A] text-white text-sm font-semibold px-5 py-2.5 rounded-full hover:bg-[#5a4228] transition-colors"
          >
            {c.book}
          </Link>

          {/* Hamburger */}
          <button
            onClick={() => setMenuOpen(!menuOpen)}
            className="p-2 rounded-lg hover:bg-[#F6F6F6] transition-colors"
            aria-label="Toggle menu"
          >
            {menuOpen ? (
              <svg viewBox="0 0 24 24" fill="none" className="w-6 h-6" stroke="currentColor" strokeWidth="2">
                <path d="M6 18L18 6M6 6l12 12" strokeLinecap="round" strokeLinejoin="round" />
              </svg>
            ) : (
              <svg viewBox="0 0 24 24" fill="none" className="w-6 h-6" stroke="currentColor" strokeWidth="2">
                <path d="M4 6h16M4 12h16M4 18h16" strokeLinecap="round" strokeLinejoin="round" />
              </svg>
            )}
          </button>
        </div>
      </div>

      {/* Hamburger panel */}
      {menuOpen && (
        <div className="absolute top-full left-0 right-0 bg-white shadow-xl border-t border-gray-100 z-50">
          <div className="max-w-6xl mx-auto px-6 py-6 grid sm:grid-cols-2 md:grid-cols-3 gap-6">
            {/* This Page */}
            <div>
              <div className="text-[10px] font-bold uppercase tracking-widest text-[#45321A] mb-3">{c.thisPage}</div>
              <ul className="space-y-2">
                {c.mainNav.map(({ label, href }) => (
                  <li key={href}>
                    <Link href={href} onClick={() => setMenuOpen(false)} className="text-sm text-[#403F3F] hover:text-[#45321A] transition-colors">
                      {label}
                    </Link>
                  </li>
                ))}
              </ul>
            </div>

            {/* Klachten / Conditions */}
            <div>
              <div className="text-[10px] font-bold uppercase tracking-widest text-[#45321A] mb-3">{c.conditionsLabel}</div>
              <ul className="space-y-2">
                {c.klachten.map(({ label, href }) => (
                  <li key={href}>
                    <Link href={href} onClick={() => setMenuOpen(false)} className="text-sm text-[#403F3F] hover:text-[#45321A] transition-colors">
                      {label}
                    </Link>
                  </li>
                ))}
              </ul>
            </div>

            {/* More */}
            <div>
              <div className="text-[10px] font-bold uppercase tracking-widest text-[#45321A] mb-3">{c.moreLabel}</div>
              <ul className="space-y-2">
                {c.moreLinks.map(({ label, href }) => (
                  <li key={href}>
                    <Link href={href} onClick={() => setMenuOpen(false)} className="text-sm text-[#403F3F] hover:text-[#45321A] transition-colors">
                      {label}
                    </Link>
                  </li>
                ))}
              </ul>
            </div>
          </div>
        </div>
      )}
    </nav>
  );
}
